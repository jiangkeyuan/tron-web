{"version":3,"file":"focus-trap.9dce6b29.js","sources":["../../node_modules/element-plus/es/hooks/use-escape-keydown/index.mjs","../../node_modules/element-plus/es/components/focus-trap/src/tokens.mjs","../../node_modules/element-plus/es/components/focus-trap/src/utils.mjs","../../node_modules/element-plus/es/components/focus-trap/src/focus-trap.mjs"],"sourcesContent":["import { onMounted, onBeforeUnmount } from 'vue';\nimport { isClient } from '@vueuse/core';\nimport '../../constants/index.mjs';\nimport { EVENT_CODE } from '../../constants/aria.mjs';\n\nlet registeredEscapeHandlers = [];\nconst cachedHandler = (e) => {\n  const event = e;\n  if (event.key === EVENT_CODE.esc) {\n    registeredEscapeHandlers.forEach((registeredHandler) => registeredHandler(event));\n  }\n};\nconst useEscapeKeydown = (handler) => {\n  onMounted(() => {\n    if (registeredEscapeHandlers.length === 0) {\n      document.addEventListener(\"keydown\", cachedHandler);\n    }\n    if (isClient)\n      registeredEscapeHandlers.push(handler);\n  });\n  onBeforeUnmount(() => {\n    registeredEscapeHandlers = registeredEscapeHandlers.filter((registeredHandler) => registeredHandler !== handler);\n    if (registeredEscapeHandlers.length === 0) {\n      if (isClient)\n        document.removeEventListener(\"keydown\", cachedHandler);\n    }\n  });\n};\n\nexport { useEscapeKeydown };\n//# sourceMappingURL=index.mjs.map\n","const FOCUS_AFTER_TRAPPED = \"focus-trap.focus-after-trapped\";\nconst FOCUS_AFTER_RELEASED = \"focus-trap.focus-after-released\";\nconst FOCUSOUT_PREVENTED = \"focus-trap.focusout-prevented\";\nconst FOCUS_AFTER_TRAPPED_OPTS = {\n  cancelable: true,\n  bubbles: false\n};\nconst FOCUSOUT_PREVENTED_OPTS = {\n  cancelable: true,\n  bubbles: false\n};\nconst ON_TRAP_FOCUS_EVT = \"focusAfterTrapped\";\nconst ON_RELEASE_FOCUS_EVT = \"focusAfterReleased\";\nconst FOCUS_TRAP_INJECTION_KEY = Symbol(\"elFocusTrap\");\n\nexport { FOCUSOUT_PREVENTED, FOCUSOUT_PREVENTED_OPTS, FOCUS_AFTER_RELEASED, FOCUS_AFTER_TRAPPED, FOCUS_AFTER_TRAPPED_OPTS, FOCUS_TRAP_INJECTION_KEY, ON_RELEASE_FOCUS_EVT, ON_TRAP_FOCUS_EVT };\n//# sourceMappingURL=tokens.mjs.map\n","import { ref, onMounted, onBeforeUnmount } from 'vue';\nimport { FOCUSOUT_PREVENTED, FOCUSOUT_PREVENTED_OPTS } from './tokens.mjs';\n\nconst focusReason = ref();\nconst lastUserFocusTimestamp = ref(0);\nconst lastAutomatedFocusTimestamp = ref(0);\nlet focusReasonUserCount = 0;\nconst obtainAllFocusableElements = (element) => {\n  const nodes = [];\n  const walker = document.createTreeWalker(element, NodeFilter.SHOW_ELEMENT, {\n    acceptNode: (node) => {\n      const isHiddenInput = node.tagName === \"INPUT\" && node.type === \"hidden\";\n      if (node.disabled || node.hidden || isHiddenInput)\n        return NodeFilter.FILTER_SKIP;\n      return node.tabIndex >= 0 || node === document.activeElement ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n    }\n  });\n  while (walker.nextNode())\n    nodes.push(walker.currentNode);\n  return nodes;\n};\nconst getVisibleElement = (elements, container) => {\n  for (const element of elements) {\n    if (!isHidden(element, container))\n      return element;\n  }\n};\nconst isHidden = (element, container) => {\n  if (process.env.NODE_ENV === \"test\")\n    return false;\n  if (getComputedStyle(element).visibility === \"hidden\")\n    return true;\n  while (element) {\n    if (container && element === container)\n      return false;\n    if (getComputedStyle(element).display === \"none\")\n      return true;\n    element = element.parentElement;\n  }\n  return false;\n};\nconst getEdges = (container) => {\n  const focusable = obtainAllFocusableElements(container);\n  const first = getVisibleElement(focusable, container);\n  const last = getVisibleElement(focusable.reverse(), container);\n  return [first, last];\n};\nconst isSelectable = (element) => {\n  return element instanceof HTMLInputElement && \"select\" in element;\n};\nconst tryFocus = (element, shouldSelect) => {\n  if (element && element.focus) {\n    const prevFocusedElement = document.activeElement;\n    element.focus({ preventScroll: true });\n    lastAutomatedFocusTimestamp.value = window.performance.now();\n    if (element !== prevFocusedElement && isSelectable(element) && shouldSelect) {\n      element.select();\n    }\n  }\n};\nfunction removeFromStack(list, item) {\n  const copy = [...list];\n  const idx = list.indexOf(item);\n  if (idx !== -1) {\n    copy.splice(idx, 1);\n  }\n  return copy;\n}\nconst createFocusableStack = () => {\n  let stack = [];\n  const push = (layer) => {\n    const currentLayer = stack[0];\n    if (currentLayer && layer !== currentLayer) {\n      currentLayer.pause();\n    }\n    stack = removeFromStack(stack, layer);\n    stack.unshift(layer);\n  };\n  const remove = (layer) => {\n    var _a, _b;\n    stack = removeFromStack(stack, layer);\n    (_b = (_a = stack[0]) == null ? void 0 : _a.resume) == null ? void 0 : _b.call(_a);\n  };\n  return {\n    push,\n    remove\n  };\n};\nconst focusFirstDescendant = (elements, shouldSelect = false) => {\n  const prevFocusedElement = document.activeElement;\n  for (const element of elements) {\n    tryFocus(element, shouldSelect);\n    if (document.activeElement !== prevFocusedElement)\n      return;\n  }\n};\nconst focusableStack = createFocusableStack();\nconst isFocusCausedByUserEvent = () => {\n  return lastUserFocusTimestamp.value > lastAutomatedFocusTimestamp.value;\n};\nconst notifyFocusReasonPointer = () => {\n  focusReason.value = \"pointer\";\n  lastUserFocusTimestamp.value = window.performance.now();\n};\nconst notifyFocusReasonKeydown = () => {\n  focusReason.value = \"keyboard\";\n  lastUserFocusTimestamp.value = window.performance.now();\n};\nconst useFocusReason = () => {\n  onMounted(() => {\n    if (focusReasonUserCount === 0) {\n      document.addEventListener(\"mousedown\", notifyFocusReasonPointer);\n      document.addEventListener(\"touchstart\", notifyFocusReasonPointer);\n      document.addEventListener(\"keydown\", notifyFocusReasonKeydown);\n    }\n    focusReasonUserCount++;\n  });\n  onBeforeUnmount(() => {\n    focusReasonUserCount--;\n    if (focusReasonUserCount <= 0) {\n      document.removeEventListener(\"mousedown\", notifyFocusReasonPointer);\n      document.removeEventListener(\"touchstart\", notifyFocusReasonPointer);\n      document.removeEventListener(\"keydown\", notifyFocusReasonKeydown);\n    }\n  });\n  return {\n    focusReason,\n    lastUserFocusTimestamp,\n    lastAutomatedFocusTimestamp\n  };\n};\nconst createFocusOutPreventedEvent = (detail) => {\n  return new CustomEvent(FOCUSOUT_PREVENTED, {\n    ...FOCUSOUT_PREVENTED_OPTS,\n    detail\n  });\n};\n\nexport { createFocusOutPreventedEvent, focusFirstDescendant, focusableStack, getEdges, getVisibleElement, isFocusCausedByUserEvent, isHidden, obtainAllFocusableElements, tryFocus, useFocusReason };\n//# sourceMappingURL=utils.mjs.map\n","import { defineComponent, ref, provide, watch, unref, nextTick, onMounted, onBeforeUnmount, renderSlot } from 'vue';\nimport { isNil } from 'lodash-unified';\nimport '../../../constants/index.mjs';\nimport '../../../hooks/index.mjs';\nimport '../../../utils/index.mjs';\nimport { useFocusReason, getEdges, createFocusOutPreventedEvent, tryFocus, focusableStack, focusFirstDescendant, obtainAllFocusableElements, isFocusCausedByUserEvent } from './utils.mjs';\nimport { ON_TRAP_FOCUS_EVT, ON_RELEASE_FOCUS_EVT, FOCUS_TRAP_INJECTION_KEY, FOCUS_AFTER_TRAPPED, FOCUS_AFTER_TRAPPED_OPTS, FOCUS_AFTER_RELEASED } from './tokens.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useEscapeKeydown } from '../../../hooks/use-escape-keydown/index.mjs';\nimport { EVENT_CODE } from '../../../constants/aria.mjs';\nimport { isString } from '@vue/shared';\n\nconst _sfc_main = defineComponent({\n  name: \"ElFocusTrap\",\n  inheritAttrs: false,\n  props: {\n    loop: Boolean,\n    trapped: Boolean,\n    focusTrapEl: Object,\n    focusStartEl: {\n      type: [Object, String],\n      default: \"first\"\n    }\n  },\n  emits: [\n    ON_TRAP_FOCUS_EVT,\n    ON_RELEASE_FOCUS_EVT,\n    \"focusin\",\n    \"focusout\",\n    \"focusout-prevented\",\n    \"release-requested\"\n  ],\n  setup(props, { emit }) {\n    const forwardRef = ref();\n    let lastFocusBeforeTrapped;\n    let lastFocusAfterTrapped;\n    const { focusReason } = useFocusReason();\n    useEscapeKeydown((event) => {\n      if (props.trapped && !focusLayer.paused) {\n        emit(\"release-requested\", event);\n      }\n    });\n    const focusLayer = {\n      paused: false,\n      pause() {\n        this.paused = true;\n      },\n      resume() {\n        this.paused = false;\n      }\n    };\n    const onKeydown = (e) => {\n      if (!props.loop && !props.trapped)\n        return;\n      if (focusLayer.paused)\n        return;\n      const { key, altKey, ctrlKey, metaKey, currentTarget, shiftKey } = e;\n      const { loop } = props;\n      const isTabbing = key === EVENT_CODE.tab && !altKey && !ctrlKey && !metaKey;\n      const currentFocusingEl = document.activeElement;\n      if (isTabbing && currentFocusingEl) {\n        const container = currentTarget;\n        const [first, last] = getEdges(container);\n        const isTabbable = first && last;\n        if (!isTabbable) {\n          if (currentFocusingEl === container) {\n            const focusoutPreventedEvent = createFocusOutPreventedEvent({\n              focusReason: focusReason.value\n            });\n            emit(\"focusout-prevented\", focusoutPreventedEvent);\n            if (!focusoutPreventedEvent.defaultPrevented) {\n              e.preventDefault();\n            }\n          }\n        } else {\n          if (!shiftKey && currentFocusingEl === last) {\n            const focusoutPreventedEvent = createFocusOutPreventedEvent({\n              focusReason: focusReason.value\n            });\n            emit(\"focusout-prevented\", focusoutPreventedEvent);\n            if (!focusoutPreventedEvent.defaultPrevented) {\n              e.preventDefault();\n              if (loop)\n                tryFocus(first, true);\n            }\n          } else if (shiftKey && [first, container].includes(currentFocusingEl)) {\n            const focusoutPreventedEvent = createFocusOutPreventedEvent({\n              focusReason: focusReason.value\n            });\n            emit(\"focusout-prevented\", focusoutPreventedEvent);\n            if (!focusoutPreventedEvent.defaultPrevented) {\n              e.preventDefault();\n              if (loop)\n                tryFocus(last, true);\n            }\n          }\n        }\n      }\n    };\n    provide(FOCUS_TRAP_INJECTION_KEY, {\n      focusTrapRef: forwardRef,\n      onKeydown\n    });\n    watch(() => props.focusTrapEl, (focusTrapEl) => {\n      if (focusTrapEl) {\n        forwardRef.value = focusTrapEl;\n      }\n    }, { immediate: true });\n    watch([forwardRef], ([forwardRef2], [oldForwardRef]) => {\n      if (forwardRef2) {\n        forwardRef2.addEventListener(\"keydown\", onKeydown);\n        forwardRef2.addEventListener(\"focusin\", onFocusIn);\n        forwardRef2.addEventListener(\"focusout\", onFocusOut);\n      }\n      if (oldForwardRef) {\n        oldForwardRef.removeEventListener(\"keydown\", onKeydown);\n        oldForwardRef.removeEventListener(\"focusin\", onFocusIn);\n        oldForwardRef.removeEventListener(\"focusout\", onFocusOut);\n      }\n    });\n    const trapOnFocus = (e) => {\n      emit(ON_TRAP_FOCUS_EVT, e);\n    };\n    const releaseOnFocus = (e) => emit(ON_RELEASE_FOCUS_EVT, e);\n    const onFocusIn = (e) => {\n      const trapContainer = unref(forwardRef);\n      if (!trapContainer)\n        return;\n      const target = e.target;\n      const relatedTarget = e.relatedTarget;\n      const isFocusedInTrap = target && trapContainer.contains(target);\n      if (!props.trapped) {\n        const isPrevFocusedInTrap = relatedTarget && trapContainer.contains(relatedTarget);\n        if (!isPrevFocusedInTrap) {\n          lastFocusBeforeTrapped = relatedTarget;\n        }\n      }\n      if (isFocusedInTrap)\n        emit(\"focusin\", e);\n      if (focusLayer.paused)\n        return;\n      if (props.trapped) {\n        if (isFocusedInTrap) {\n          lastFocusAfterTrapped = target;\n        } else {\n          tryFocus(lastFocusAfterTrapped, true);\n        }\n      }\n    };\n    const onFocusOut = (e) => {\n      const trapContainer = unref(forwardRef);\n      if (focusLayer.paused || !trapContainer)\n        return;\n      if (props.trapped) {\n        const relatedTarget = e.relatedTarget;\n        if (!isNil(relatedTarget) && !trapContainer.contains(relatedTarget)) {\n          setTimeout(() => {\n            if (!focusLayer.paused && props.trapped) {\n              const focusoutPreventedEvent = createFocusOutPreventedEvent({\n                focusReason: focusReason.value\n              });\n              emit(\"focusout-prevented\", focusoutPreventedEvent);\n              if (!focusoutPreventedEvent.defaultPrevented) {\n                tryFocus(lastFocusAfterTrapped, true);\n              }\n            }\n          }, 0);\n        }\n      } else {\n        const target = e.target;\n        const isFocusedInTrap = target && trapContainer.contains(target);\n        if (!isFocusedInTrap)\n          emit(\"focusout\", e);\n      }\n    };\n    async function startTrap() {\n      await nextTick();\n      const trapContainer = unref(forwardRef);\n      if (trapContainer) {\n        focusableStack.push(focusLayer);\n        const prevFocusedElement = trapContainer.contains(document.activeElement) ? lastFocusBeforeTrapped : document.activeElement;\n        lastFocusBeforeTrapped = prevFocusedElement;\n        const isPrevFocusContained = trapContainer.contains(prevFocusedElement);\n        if (!isPrevFocusContained) {\n          const focusEvent = new Event(FOCUS_AFTER_TRAPPED, FOCUS_AFTER_TRAPPED_OPTS);\n          trapContainer.addEventListener(FOCUS_AFTER_TRAPPED, trapOnFocus);\n          trapContainer.dispatchEvent(focusEvent);\n          if (!focusEvent.defaultPrevented) {\n            nextTick(() => {\n              let focusStartEl = props.focusStartEl;\n              if (!isString(focusStartEl)) {\n                tryFocus(focusStartEl);\n                if (document.activeElement !== focusStartEl) {\n                  focusStartEl = \"first\";\n                }\n              }\n              if (focusStartEl === \"first\") {\n                focusFirstDescendant(obtainAllFocusableElements(trapContainer), true);\n              }\n              if (document.activeElement === prevFocusedElement || focusStartEl === \"container\") {\n                tryFocus(trapContainer);\n              }\n            });\n          }\n        }\n      }\n    }\n    function stopTrap() {\n      const trapContainer = unref(forwardRef);\n      if (trapContainer) {\n        trapContainer.removeEventListener(FOCUS_AFTER_TRAPPED, trapOnFocus);\n        const releasedEvent = new CustomEvent(FOCUS_AFTER_RELEASED, {\n          ...FOCUS_AFTER_TRAPPED_OPTS,\n          detail: {\n            focusReason: focusReason.value\n          }\n        });\n        trapContainer.addEventListener(FOCUS_AFTER_RELEASED, releaseOnFocus);\n        trapContainer.dispatchEvent(releasedEvent);\n        if (!releasedEvent.defaultPrevented && (focusReason.value == \"keyboard\" || !isFocusCausedByUserEvent() || trapContainer.contains(document.activeElement))) {\n          tryFocus(lastFocusBeforeTrapped != null ? lastFocusBeforeTrapped : document.body);\n        }\n        trapContainer.removeEventListener(FOCUS_AFTER_RELEASED, trapOnFocus);\n        focusableStack.remove(focusLayer);\n      }\n    }\n    onMounted(() => {\n      if (props.trapped) {\n        startTrap();\n      }\n      watch(() => props.trapped, (trapped) => {\n        if (trapped) {\n          startTrap();\n        } else {\n          stopTrap();\n        }\n      });\n    });\n    onBeforeUnmount(() => {\n      if (props.trapped) {\n        stopTrap();\n      }\n    });\n    return {\n      onKeydown\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return renderSlot(_ctx.$slots, \"default\", { handleKeydown: _ctx.onKeydown });\n}\nvar ElFocusTrap = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue\"]]);\n\nexport { ElFocusTrap as default };\n//# sourceMappingURL=focus-trap.mjs.map\n"],"names":["registeredEscapeHandlers","cachedHandler","event","EVENT_CODE","registeredHandler","useEscapeKeydown","handler","onMounted","isClient","onBeforeUnmount","FOCUS_AFTER_TRAPPED","FOCUS_AFTER_RELEASED","FOCUSOUT_PREVENTED","FOCUS_AFTER_TRAPPED_OPTS","FOCUSOUT_PREVENTED_OPTS","ON_TRAP_FOCUS_EVT","ON_RELEASE_FOCUS_EVT","FOCUS_TRAP_INJECTION_KEY","focusReason","ref","lastUserFocusTimestamp","lastAutomatedFocusTimestamp","focusReasonUserCount","obtainAllFocusableElements","element","nodes","walker","node","isHiddenInput","getVisibleElement","elements","container","isHidden","getEdges","focusable","first","last","isSelectable","tryFocus","shouldSelect","prevFocusedElement","removeFromStack","list","item","copy","idx","createFocusableStack","stack","layer","currentLayer","_a","_b","focusFirstDescendant","focusableStack","isFocusCausedByUserEvent","notifyFocusReasonPointer","notifyFocusReasonKeydown","useFocusReason","createFocusOutPreventedEvent","detail","_sfc_main","defineComponent","props","emit","forwardRef","lastFocusBeforeTrapped","lastFocusAfterTrapped","focusLayer","onKeydown","e","key","altKey","ctrlKey","metaKey","currentTarget","shiftKey","loop","isTabbing","currentFocusingEl","focusoutPreventedEvent","provide","watch","focusTrapEl","forwardRef2","oldForwardRef","onFocusIn","onFocusOut","trapOnFocus","releaseOnFocus","trapContainer","unref","target","relatedTarget","isFocusedInTrap","isNil","startTrap","nextTick","focusEvent","focusStartEl","isString","stopTrap","releasedEvent","trapped","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","renderSlot","ElFocusTrap","_export_sfc"],"mappings":"+KAKA,IAAIA,EAA2B,CAAA,EAC/B,MAAMC,EAAiB,GAAM,CAC3B,MAAMC,EAAQ,EACVA,EAAM,MAAQC,EAAW,KAC3BH,EAAyB,QAASI,GAAsBA,EAAkBF,CAAK,CAAC,CAEpF,EACMG,GAAoBC,GAAY,CACpCC,EAAU,IAAM,CACVP,EAAyB,SAAW,GACtC,SAAS,iBAAiB,UAAWC,CAAa,EAEhDO,GACFR,EAAyB,KAAKM,CAAO,CAC3C,CAAG,EACDG,EAAgB,IAAM,CACpBT,EAA2BA,EAAyB,OAAQI,GAAsBA,IAAsBE,CAAO,EAC3GN,EAAyB,SAAW,GAClCQ,GACF,SAAS,oBAAoB,UAAWP,CAAa,CAE7D,CAAG,CACH,EC3BMS,EAAsB,iCACtBC,EAAuB,kCACvBC,GAAqB,gCACrBC,EAA2B,CAC/B,WAAY,GACZ,QAAS,EACX,EACMC,GAA0B,CAC9B,WAAY,GACZ,QAAS,EACX,EACMC,EAAoB,oBACpBC,EAAuB,qBACvBC,GAA2B,OAAO,aAAa,ECV/CC,EAAcC,EAAG,EACjBC,EAAyBD,EAAI,CAAC,EAC9BE,EAA8BF,EAAI,CAAC,EACzC,IAAIG,EAAuB,EAC3B,MAAMC,EAA8BC,GAAY,CAC9C,MAAMC,EAAQ,CAAA,EACRC,EAAS,SAAS,iBAAiBF,EAAS,WAAW,aAAc,CACzE,WAAaG,GAAS,CACpB,MAAMC,EAAgBD,EAAK,UAAY,SAAWA,EAAK,OAAS,SAChE,OAAIA,EAAK,UAAYA,EAAK,QAAUC,EAC3B,WAAW,YACbD,EAAK,UAAY,GAAKA,IAAS,SAAS,cAAgB,WAAW,cAAgB,WAAW,WACtG,CACL,CAAG,EACD,KAAOD,EAAO,SAAU,GACtBD,EAAM,KAAKC,EAAO,WAAW,EAC/B,OAAOD,CACT,EACMI,EAAoB,CAACC,EAAUC,IAAc,CACjD,UAAWP,KAAWM,EACpB,GAAI,CAACE,GAASR,EAASO,CAAS,EAC9B,OAAOP,CAEb,EACMQ,GAAW,CAACR,EAASO,IAAc,CAGvC,GAAI,iBAAiBP,CAAO,EAAE,aAAe,SAC3C,MAAO,GACT,KAAOA,GAAS,CACd,GAAIO,GAAaP,IAAYO,EAC3B,MAAO,GACT,GAAI,iBAAiBP,CAAO,EAAE,UAAY,OACxC,MAAO,GACTA,EAAUA,EAAQ,aACnB,CACD,MAAO,EACT,EACMS,GAAYF,GAAc,CAC9B,MAAMG,EAAYX,EAA2BQ,CAAS,EAChDI,EAAQN,EAAkBK,EAAWH,CAAS,EAC9CK,EAAOP,EAAkBK,EAAU,QAAS,EAAEH,CAAS,EAC7D,MAAO,CAACI,EAAOC,CAAI,CACrB,EACMC,GAAgBb,GACbA,aAAmB,kBAAoB,WAAYA,EAEtDc,EAAW,CAACd,EAASe,IAAiB,CAC1C,GAAIf,GAAWA,EAAQ,MAAO,CAC5B,MAAMgB,EAAqB,SAAS,cACpChB,EAAQ,MAAM,CAAE,cAAe,EAAM,CAAA,EACrCH,EAA4B,MAAQ,OAAO,YAAY,IAAG,EACtDG,IAAYgB,GAAsBH,GAAab,CAAO,GAAKe,GAC7Df,EAAQ,OAAM,CAEjB,CACH,EACA,SAASiB,EAAgBC,EAAMC,EAAM,CACnC,MAAMC,EAAO,CAAC,GAAGF,CAAI,EACfG,EAAMH,EAAK,QAAQC,CAAI,EAC7B,OAAIE,IAAQ,IACVD,EAAK,OAAOC,EAAK,CAAC,EAEbD,CACT,CACA,MAAME,GAAuB,IAAM,CACjC,IAAIC,EAAQ,CAAA,EAcZ,MAAO,CACL,KAdYC,GAAU,CACtB,MAAMC,EAAeF,EAAM,GACvBE,GAAgBD,IAAUC,GAC5BA,EAAa,MAAK,EAEpBF,EAAQN,EAAgBM,EAAOC,CAAK,EACpCD,EAAM,QAAQC,CAAK,CACvB,EAQI,OAPcA,GAAU,CACxB,IAAIE,EAAIC,EACRJ,EAAQN,EAAgBM,EAAOC,CAAK,GACnCG,GAAMD,EAAKH,EAAM,KAAO,KAAO,OAASG,EAAG,SAAW,MAAgBC,EAAG,KAAKD,CAAE,CACrF,CAIA,CACA,EACME,GAAuB,CAACtB,EAAUS,EAAe,KAAU,CAC/D,MAAMC,EAAqB,SAAS,cACpC,UAAWhB,KAAWM,EAEpB,GADAQ,EAASd,EAASe,CAAY,EAC1B,SAAS,gBAAkBC,EAC7B,MAEN,EACMa,EAAiBP,GAAoB,EACrCQ,GAA2B,IACxBlC,EAAuB,MAAQC,EAA4B,MAE9DkC,EAA2B,IAAM,CACrCrC,EAAY,MAAQ,UACpBE,EAAuB,MAAQ,OAAO,YAAY,IAAG,CACvD,EACMoC,EAA2B,IAAM,CACrCtC,EAAY,MAAQ,WACpBE,EAAuB,MAAQ,OAAO,YAAY,IAAG,CACvD,EACMqC,GAAiB,KACrBlD,EAAU,IAAM,CACVe,IAAyB,IAC3B,SAAS,iBAAiB,YAAaiC,CAAwB,EAC/D,SAAS,iBAAiB,aAAcA,CAAwB,EAChE,SAAS,iBAAiB,UAAWC,CAAwB,GAE/DlC,GACJ,CAAG,EACDb,EAAgB,IAAM,CACpBa,IACIA,GAAwB,IAC1B,SAAS,oBAAoB,YAAaiC,CAAwB,EAClE,SAAS,oBAAoB,aAAcA,CAAwB,EACnE,SAAS,oBAAoB,UAAWC,CAAwB,EAEtE,CAAG,EACM,CACL,YAAAtC,EACA,uBAAAE,EACA,4BAAAC,CACJ,GAEMqC,EAAgCC,GAC7B,IAAI,YAAY/C,GAAoB,CACzC,GAAGE,GACH,OAAA6C,CACJ,CAAG,EC3HGC,GAAYC,GAAgB,CAChC,KAAM,cACN,aAAc,GACd,MAAO,CACL,KAAM,QACN,QAAS,QACT,YAAa,OACb,aAAc,CACZ,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,OACV,CACF,EACD,MAAO,CACL9C,EACAC,EACA,UACA,WACA,qBACA,mBACD,EACD,MAAM8C,EAAO,CAAE,KAAAC,GAAQ,CACrB,MAAMC,EAAa7C,IACnB,IAAI8C,EACAC,EACJ,KAAM,CAAE,YAAAhD,GAAgBuC,KACxBpD,GAAkBH,GAAU,CACtB4D,EAAM,SAAW,CAACK,EAAW,QAC/BJ,EAAK,oBAAqB7D,CAAK,CAEvC,CAAK,EACD,MAAMiE,EAAa,CACjB,OAAQ,GACR,OAAQ,CACN,KAAK,OAAS,EACf,EACD,QAAS,CACP,KAAK,OAAS,EACf,CACP,EACUC,EAAaC,GAAM,CAGvB,GAFI,CAACP,EAAM,MAAQ,CAACA,EAAM,SAEtBK,EAAW,OACb,OACF,KAAM,CAAE,IAAAG,EAAK,OAAAC,EAAQ,QAAAC,EAAS,QAAAC,EAAS,cAAAC,EAAe,SAAAC,CAAU,EAAGN,EAC7D,CAAE,KAAAO,CAAM,EAAGd,EACXe,GAAYP,IAAQnE,EAAW,KAAO,CAACoE,GAAU,CAACC,GAAW,CAACC,EAC9DK,EAAoB,SAAS,cACnC,GAAID,IAAaC,EAAmB,CAClC,MAAM/C,EAAY2C,EACZ,CAACvC,EAAOC,CAAI,EAAIH,GAASF,CAAS,EAExC,GADmBI,GAASC,GAY1B,GAAI,CAACuC,GAAYG,IAAsB1C,EAAM,CAC3C,MAAM2C,EAAyBrB,EAA6B,CAC1D,YAAaxC,EAAY,KACvC,CAAa,EACD6C,EAAK,qBAAsBgB,CAAsB,EAC5CA,EAAuB,mBAC1BV,EAAE,eAAc,EACZO,GACFtC,EAASH,EAAO,EAAI,EAEpC,SAAqBwC,GAAY,CAACxC,EAAOJ,CAAS,EAAE,SAAS+C,CAAiB,EAAG,CACrE,MAAMC,EAAyBrB,EAA6B,CAC1D,YAAaxC,EAAY,KACvC,CAAa,EACD6C,EAAK,qBAAsBgB,CAAsB,EAC5CA,EAAuB,mBAC1BV,EAAE,eAAc,EACZO,GACFtC,EAASF,EAAM,EAAI,EAExB,UA9BG0C,IAAsB/C,EAAW,CACnC,MAAMgD,EAAyBrB,EAA6B,CAC1D,YAAaxC,EAAY,KACvC,CAAa,EACD6C,EAAK,qBAAsBgB,CAAsB,EAC5CA,EAAuB,kBAC1BV,EAAE,eAAc,CAEnB,CAwBJ,CACP,EACIW,GAAQ/D,GAA0B,CAChC,aAAc+C,EACd,UAAAI,CACN,CAAK,EACDa,EAAM,IAAMnB,EAAM,YAAcoB,GAAgB,CAC1CA,IACFlB,EAAW,MAAQkB,EAE3B,EAAO,CAAE,UAAW,EAAI,CAAE,EACtBD,EAAM,CAACjB,CAAU,EAAG,CAAC,CAACmB,CAAW,EAAG,CAACC,CAAa,IAAM,CAClDD,IACFA,EAAY,iBAAiB,UAAWf,CAAS,EACjDe,EAAY,iBAAiB,UAAWE,CAAS,EACjDF,EAAY,iBAAiB,WAAYG,CAAU,GAEjDF,IACFA,EAAc,oBAAoB,UAAWhB,CAAS,EACtDgB,EAAc,oBAAoB,UAAWC,CAAS,EACtDD,EAAc,oBAAoB,WAAYE,CAAU,EAEhE,CAAK,EACD,MAAMC,EAAelB,GAAM,CACzBN,EAAKhD,EAAmBsD,CAAC,CAC/B,EACUmB,EAAkBnB,GAAMN,EAAK/C,EAAsBqD,CAAC,EACpDgB,EAAahB,GAAM,CACvB,MAAMoB,EAAgBC,EAAM1B,CAAU,EACtC,GAAI,CAACyB,EACH,OACF,MAAME,EAAStB,EAAE,OACXuB,EAAgBvB,EAAE,cAClBwB,EAAkBF,GAAUF,EAAc,SAASE,CAAM,EAC1D7B,EAAM,SACmB8B,GAAiBH,EAAc,SAASG,CAAa,IAE/E3B,EAAyB2B,GAGzBC,GACF9B,EAAK,UAAWM,CAAC,EACf,CAAAF,EAAW,QAEXL,EAAM,UACJ+B,EACF3B,EAAwByB,EAExBrD,EAAS4B,EAAuB,EAAI,EAG9C,EACUoB,EAAcjB,GAAM,CACxB,MAAMoB,EAAgBC,EAAM1B,CAAU,EACtC,GAAI,EAAAG,EAAW,QAAU,CAACsB,GAE1B,GAAI3B,EAAM,QAAS,CACjB,MAAM8B,EAAgBvB,EAAE,cACpB,CAACyB,GAAMF,CAAa,GAAK,CAACH,EAAc,SAASG,CAAa,GAChE,WAAW,IAAM,CACf,GAAI,CAACzB,EAAW,QAAUL,EAAM,QAAS,CACvC,MAAMiB,EAAyBrB,EAA6B,CAC1D,YAAaxC,EAAY,KACzC,CAAe,EACD6C,EAAK,qBAAsBgB,CAAsB,EAC5CA,EAAuB,kBAC1BzC,EAAS4B,EAAuB,EAAI,CAEvC,CACF,EAAE,CAAC,CAEd,KAAa,CACL,MAAMyB,EAAStB,EAAE,OACOsB,GAAUF,EAAc,SAASE,CAAM,GAE7D5B,EAAK,WAAYM,CAAC,CACrB,CACP,EACI,eAAe0B,GAAY,CACzB,MAAMC,EAAQ,EACd,MAAMP,EAAgBC,EAAM1B,CAAU,EACtC,GAAIyB,EAAe,CACjBpC,EAAe,KAAKc,CAAU,EAC9B,MAAM3B,EAAqBiD,EAAc,SAAS,SAAS,aAAa,EAAIxB,EAAyB,SAAS,cAG9G,GAFAA,EAAyBzB,EAErB,CADyBiD,EAAc,SAASjD,CAAkB,EAC3C,CACzB,MAAMyD,EAAa,IAAI,MAAMvF,EAAqBG,CAAwB,EAC1E4E,EAAc,iBAAiB/E,EAAqB6E,CAAW,EAC/DE,EAAc,cAAcQ,CAAU,EACjCA,EAAW,kBACdD,EAAS,IAAM,CACb,IAAIE,EAAepC,EAAM,aACpBqC,GAASD,CAAY,IACxB5D,EAAS4D,CAAY,EACjB,SAAS,gBAAkBA,IAC7BA,EAAe,UAGfA,IAAiB,SACnB9C,GAAqB7B,EAA2BkE,CAAa,EAAG,EAAI,GAElE,SAAS,gBAAkBjD,GAAsB0D,IAAiB,cACpE5D,EAASmD,CAAa,CAEtC,CAAa,CAEJ,CACF,CACF,CACD,SAASW,GAAW,CAClB,MAAMX,EAAgBC,EAAM1B,CAAU,EACtC,GAAIyB,EAAe,CACjBA,EAAc,oBAAoB/E,EAAqB6E,CAAW,EAClE,MAAMc,EAAgB,IAAI,YAAY1F,EAAsB,CAC1D,GAAGE,EACH,OAAQ,CACN,YAAaK,EAAY,KAC1B,CACX,CAAS,EACDuE,EAAc,iBAAiB9E,EAAsB6E,CAAc,EACnEC,EAAc,cAAcY,CAAa,EACrC,CAACA,EAAc,mBAAqBnF,EAAY,OAAS,YAAc,CAACoC,GAAwB,GAAMmC,EAAc,SAAS,SAAS,aAAa,IACrJnD,EAAS2B,GAA0B,KAAOA,EAAyB,SAAS,IAAI,EAElFwB,EAAc,oBAAoB9E,EAAsB4E,CAAW,EACnElC,EAAe,OAAOc,CAAU,CACjC,CACF,CACD,OAAA5D,EAAU,IAAM,CACVuD,EAAM,SACRiC,IAEFd,EAAM,IAAMnB,EAAM,QAAUwC,GAAY,CAClCA,EACFP,IAEAK,GAEV,CAAO,CACP,CAAK,EACD3F,EAAgB,IAAM,CAChBqD,EAAM,SACRsC,GAER,CAAK,EACM,CACL,UAAAhC,CACN,CACG,CACH,CAAC,EACD,SAASmC,GAAYC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,EAAU,CAClE,OAAOC,GAAWN,EAAK,OAAQ,UAAW,CAAE,cAAeA,EAAK,SAAS,CAAE,CAC7E,CACG,IAACO,GAA8BC,GAAYpD,GAAW,CAAC,CAAC,SAAU2C,EAAW,EAAG,CAAC,SAAU,+FAA+F,CAAC,CAAC"}