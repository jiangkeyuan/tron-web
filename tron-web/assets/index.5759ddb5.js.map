{"version":3,"file":"index.5759ddb5.js","sources":["../../src/page/buyer/manual-lease/index.vue"],"sourcesContent":["<template>\n  <div class=\"maual-lease\">\n    <el-form :model=\"form\" label-width=\"200px\" label-position=\"left\">\n      <el-form-item label=\"可用余额:\" class=\"maual-lease-item\">\n        <span>165.880744 TRX</span>\n      </el-form-item>\n      <el-form-item label=\"租用量:\">\n        <div class=\"maual-lease-item-energy\">\n          <el-input v-model=\"form.rentalEnergyQuantity\" placeholder=\"请输入租用量\">\n            <template #append>Energy</template>\n          </el-input>\n          <span class=\"maual-lease-item-energy-text\">\n            大约需要支付\n            <span class=\"maual-lease-item-energy-text-num\">{{ rentalEnergynum }}</span>\n            TRX\n          </span>\n        </div>\n      </el-form-item>\n      <el-form-item label=\"租用天数:\" class=\"maual-lease-item\">\n        <el-input-number class=\"el-input-number\" v-model=\"form.rentalDays\" :min=\"3\" placeholder=\"请输入租用天数\" />\n      </el-form-item>\n      <el-form-item label=\"接收地址:\" class=\"maual-lease-item\">\n        <el-input v-model=\"form.receiveAddress\" placeholder=\"必须输入接受地址\" />\n      </el-form-item>\n      <el-form-item class=\"maual-lease-item\">\n        <el-button type=\"primary\" @click=\"() => buy()\">租 用</el-button>\n        <el-button link type=\"primary\" @click=openBatch>批量租赁</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script setup>\nimport { manaulBuy } from '@/utils/axios/buyer/index';\nimport { ElMessage } from 'element-plus';\nconst store = useStore();\nconst form = reactive({\n  receiveAddress: '',\n  rentalDays: 3,\n  rentalEnergyQuantity: ''\n});\n\nlet rentalEnergynum = ref(null);\n\nwatch([() => form.rentalEnergyQuantity, () => form.rentalDays], (n, o) => {\n  console.log(n)\n  const rate = +n[0] >= 50000 ? 115 : 120;\n  rentalEnergynum.value = +n[0] * rate * n[1] / 1000000\n})\n\nconst buy = async () => {\n  if (!form.rentalEnergyQuantity) { ElMessage.error('请输入租用量'); return; }\n  if (!form.rentalDays) { ElMessage.error('请输入租用天数'); return; }\n  if (!form.receiveAddress) { ElMessage.error('请输入接收地址'); return; }\n  const data = await manaulBuy('/buyer/user/manaul/buy', { ...form, rentalEnergyQuantity: +form.rentalEnergyQuantity });\n  store.dispatch('getUserInfoAction');\n  ElMessage[data.code === 12000 ? 'success' : 'error'](data.msg);\n}\n\nconst openBatch = () => {\n  window.open(`${location.origin}/#/open/batch`, '_blank');\n}\n</script>\n<style scoped>\n.maual-lease {\n  padding: 24px;\n  box-sizing: border-box;\n  color: #000000d9;\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5715;\n  font-feature-settings: tnum;\n  background: #fff;\n  border-radius: 5px !important;\n  border: 1px solid #c8d0df !important;\n}\n\n.maual-lease-item {\n  width: 600px;\n}\n\n.el-input-number {\n  width: 400px;\n}\n\n.el-input-group--append {\n  width: 400px;\n}\n\n.maual-lease-item-energy {\n  display: flex;\n  flex-direction: row;\n}\n\n.maual-lease-item-energy-text {\n  margin-left: 20px;\n  color: #989fae;\n}\n\n.maual-lease-item-energy-text-num {\n  color: #1890ff;\n}\n</style>"],"names":["store","useStore","form","reactive","rentalEnergynum","ref","watch","n","o","rate","buy","ElMessage","data","manaulBuy","openBatch"],"mappings":"u2BAkCA,MAAAA,EAAAC,EAAA,EACAC,EAAAC,EAAA,CACA,eAAA,GACA,WAAA,EACA,qBAAA,EACA,CAAA,EAEA,IAAAC,EAAAC,EAAA,IAAA,EAEAC,EAAA,CAAA,IAAAJ,EAAA,qBAAA,IAAAA,EAAA,UAAA,EAAA,CAAAK,EAAAC,IAAA,CACA,QAAA,IAAAD,CAAA,EACA,MAAAE,EAAA,CAAAF,EAAA,IAAA,IAAA,IAAA,IACAH,EAAA,MAAA,CAAAG,EAAA,GAAAE,EAAAF,EAAA,GAAA,GACA,CAAA,EAEA,MAAAG,EAAA,SAAA,CACA,GAAA,CAAAR,EAAA,qBAAA,CAAAS,EAAA,MAAA,sCAAA,EAAA,MAAA,CACA,GAAA,CAAAT,EAAA,WAAA,CAAAS,EAAA,MAAA,4CAAA,EAAA,MAAA,CACA,GAAA,CAAAT,EAAA,eAAA,CAAAS,EAAA,MAAA,4CAAA,EAAA,MAAA,CACA,MAAAC,EAAA,MAAAC,EAAA,yBAAA,CAAA,GAAAX,EAAA,qBAAA,CAAAA,EAAA,oBAAA,CAAA,EACAF,EAAA,SAAA,mBAAA,EACAW,EAAAC,EAAA,OAAA,KAAA,UAAA,SAAAA,EAAA,GAAA,CACA,EAEAE,EAAA,IAAA,CACA,OAAA,KAAA,GAAA,SAAA,sBAAA,QAAA,CACA"}