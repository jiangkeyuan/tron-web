{"version":3,"file":"index.9082657b.js","sources":["../../src/page/batch/index.vue"],"sourcesContent":["<template>\n  <div class=\"outer\">\n    <h1>简易批量租能量</h1>\n    <div class=\"outer-title\">\n      <span>您的Api密钥</span>\n      <span>余额: 0</span>\n    </div>\n    <el-input v-model=\"form.apiKey\" placeholder=\"填写你的密钥\">\n      <template #append>\n        <el-button>更新余额</el-button>\n        <el-button>查询可租能量</el-button>\n      </template>\n    </el-input>\n    <div class=\"outer-title\">\n      <span>租用能量数</span>\n    </div>\n    <el-input v-model=\"form.rentalEnergyQuantity\" type=\"number\" placeholder=\"每个地址租用的能量数,10000起租\"></el-input>\n\n    <div class=\"outer-title\">\n      <span>接收能量的地址（一行一个）</span>\n    </div>\n    <el-input v-model=\"form.receiveAddress\" placeholder=\"接收能量的地址（一行一个）\" rows=\"10\" type=\"textarea\"></el-input>\n\n    <div class=\"outer-title\">\n      <span>已经发送的地址</span>\n    </div>\n    <el-input disabled v-model=\"receiveAddressSuccess\" placeholder=\"此处会显示已发送成功的钱包地址...\" rows=\"10\"\n      type=\"textarea\"></el-input>\n\n    <el-button type=\"primary\" @click=\"submit\" class=\"outer-btn\">开始新的请求</el-button>\n  </div>\n</template>\n<script setup>\nimport { orderSubmit } from \"@/utils/axios/buyer/index.js\";\nimport { ElMessage } from \"element-plus\";\nconst form = reactive({\n  rentalDays: 3\n})\n\nlet receiveAddressList = [];\nconst receiveAddressSuccess = ref('');\n\nconst submit = async () => {\n  if (!form.rentalEnergyQuantity) {\n    ElMessage.error('请输入能量数');\n    return;\n  }\n  if (!form.receiveAddress) {\n    ElMessage.error('请输入接收方地址');\n    return;\n  }\n  receiveAddressSuccess.value = \"\";\n\n  if (receiveAddressList.length === 0) {\n    receiveAddressList = form.receiveAddress.split(/[\\s]/);\n  }\n\n  getList(receiveAddressList)\n}\n\nconst getList = async (receiveAddressList) => {\n  if (receiveAddressList.length === 0) {\n    ElMessage.success('操作成功')\n    return;\n  }\n\n  const receiveAddress = receiveAddressList[0];\n  receiveAddressList.splice(0, 1);\n  const data = await orderSubmit({\n    apiKey: form.apiKey,\n    receiveAddress,\n    rentalDays: 3,\n    rentalEnergyQuantity: form.rentalEnergyQuantity\n  })\n  if (data.code === 12000) {\n    receiveAddressSuccess.value += data.data.toAddress + ','\n    getList(receiveAddressList)\n  } else {\n    ElMessage.error(`${receiveAddress}:${data.msg}`);\n  }\n}\n</script>\n<style scoped>\n.outer-btn {\n  margin-top: 20px;\n}\n\nh1 {\n  font-size: 28px;\n}\n\n.outer-title {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  color: #606266;\n  font-size: 14px;\n  margin: 10px 0;\n}\n\n.outer {\n  margin: auto auto;\n  width: 800px;\n  margin-top: 20px;\n  background-color: white;\n  border-radius: 10px;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, .1);\n  padding: 20px;\n}\n</style>"],"names":["form","reactive","receiveAddressList","receiveAddressSuccess","ref","submit","ElMessage","getList","receiveAddress","data","orderSubmit"],"mappings":"uhCAmCA,MAAAA,EAAAC,EAAA,CACA,WAAA,CACA,CAAA,EAEA,IAAAC,EAAA,CAAA,EACA,MAAAC,EAAAC,EAAA,EAAA,EAEAC,EAAA,SAAA,CACA,GAAA,CAAAL,EAAA,qBAAA,CACAM,EAAA,MAAA,sCAAA,EACA,MACA,CACA,GAAA,CAAAN,EAAA,eAAA,CACAM,EAAA,MAAA,kDAAA,EACA,MACA,CACAH,EAAA,MAAA,GAEAD,EAAA,SAAA,IACAA,EAAAF,EAAA,eAAA,MAAA,MAAA,GAGAO,EAAAL,CAAA,CACA,EAEAK,EAAA,MAAAL,GAAA,CACA,GAAAA,EAAA,SAAA,EAAA,CACAI,EAAA,QAAA,0BAAA,EACA,MACA,CAEA,MAAAE,EAAAN,EAAA,GACAA,EAAA,OAAA,EAAA,CAAA,EACA,MAAAO,EAAA,MAAAC,EAAA,CACA,OAAAV,EAAA,OACA,eAAAQ,EACA,WAAA,EACA,qBAAAR,EAAA,oBACA,CAAA,EACAS,EAAA,OAAA,MACAN,EAAA,OAAAM,EAAA,KAAA,UAAA,IACAF,EAAAL,CAAA,GAEAI,EAAA,MAAA,GAAAE,KAAAC,EAAA,KAAA,CAEA"}