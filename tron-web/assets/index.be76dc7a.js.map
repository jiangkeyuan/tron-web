{"version":3,"file":"index.be76dc7a.js","sources":["../../src/page/buyer/api-key/index.vue"],"sourcesContent":["<template>\n  <div class=\"api-key\">\n    <el-button class=\"api-key-button\" type=\"primary\" v-if=\"apiList.length !== 0\" @click=\"createApi\">创建API密钥</el-button>\n\n    <div class=\"api-key-content\" v-if=\"apiList.length === 0\">\n      <DashBord>\n        <div class=\"api-key-content-header\">\n          <div class=\"api-key-content-header-left\">\n            <span class=\"api-key-content-header-left-title\">API密钥(0/3)</span>\n          </div>\n          <div class=\"api-key-content-header-left\">\n            <span class=\"api-key-content-header-left-title api-key-content-header-left-title-color\">如何使用API?</span>\n            <el-button class=\"api-key-button\" type=\"primary\" @click=\"createApi\">创建API密钥</el-button>\n          </div>\n        </div>\n\n        <div class=\"api-key-content-header-body\">\n          <div class=\"api-key-content-header-body-item\">\n            <span class=\"api-key-content-header-body-item-key\"></span>\n            <span class=\"api-key-content-header-body-item-value\"></span>\n          </div>\n\n          <div class=\"api-key-content-header-body-item\">\n            <span class=\"api-key-content-header-body-item-key\"></span>\n            <span class=\"api-key-content-header-body-item-value\"></span>\n          </div>\n        </div>\n      </DashBord>\n    </div>\n\n    <div class=\"api-key-content\" v-for=\"item in apiList\">\n      <DashBord>\n        <div class=\"api-key-content-header\">\n          <div class=\"api-key-content-header-left\">\n            <span class=\"api-key-content-header-left-title\">{{ item.keyName }}</span>\n            <span class=\"api-key-content-header-left-edit\" @click=\"() => edit(item)\">编辑 </span>\n            <span class=\"api-key-content-header-left-edit\" @click=\"() => deleteApikey(item)\"> 删除</span>\n          </div>\n          <div class=\"api-key-content-header-left\">\n            <span class=\"api-key-content-header-left-title api-key-content-header-left-title-color\">{{ item.apiKey\n            }}</span>\n            <el-icon size=\"15\" @click=\"() => copyEnd(item.apiKey)\" class=\"recharge-content-address-icon\" color=\"#294aa5\">\n              <CopyDocument />\n            </el-icon>\n          </div>\n        </div>\n\n        <div class=\"api-key-content-header-body\">\n          <div class=\"api-key-content-header-body-item\">\n            <span class=\"api-key-content-header-body-item-key\">今日租用:</span>\n            <span class=\"api-key-content-header-body-item-value\">{{ item.rentalEnergy || 0 }} 能量 / 消耗 {{ item.usedAmount\n              || 0 }}\n              TRX</span>\n          </div>\n\n          <div class=\"api-key-content-header-body-item\">\n            <span class=\"api-key-content-header-body-item-key\">昨日租用:</span>\n            <span class=\"api-key-content-header-body-item-value\">{{ item.billingEnergy || 0 }} 能量 / 消耗 {{\n              item.sbillingAmount || 0 }}\n              TRX</span>\n          </div>\n        </div>\n      </DashBord>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport DashBord from \"@/components/dashbord-content.vue\";\nimport { copy } from \"@/utils/utils/index.js\";\nimport { createAPIKEY } from \"@/utils/utils/utils-ui.js\";\nimport { getApiList, addApiList, updateApiList, delApiList } from '@/utils/axios/buyer/index.js'\nimport { onMounted } from \"vue\";\nimport { ElMessage } from \"element-plus\";\nconst apiList = ref([]);\n\nconst copyEnd = (msg) => {\n  copy({\n    msg,\n    callback: () => {\n      ElMessage.success(\"复制成功\");\n    },\n  });\n};\n\nconst deleteApikey = (item) => {\n  ElMessageBox.confirm(\n    '是否删除当前的API KEY',\n    '警告',\n    {\n      confirmButtonText: '好的',\n      cancelButtonText: '取消',\n      type: 'warning',\n    }\n  )\n    .then(async () => {\n      const data = await delApiList({ apikey: item.apiKey })\n      if (data.code == 12000) {\n        searchApi();\n        ElMessage({\n          type: 'success',\n          message: '删除成功',\n        })\n      } else {\n        ElMessage({\n          type: 'error',\n          message: data.msg\n        })\n      }\n\n    })\n}\n\nconst edit = (item) => {\n  ElMessageBox.prompt(\"\", \"请输入Key的名称，以便区分统计\", {\n    confirmButtonText: \"确定\",\n    inputErrorMessage: \"Invalid Email\",\n    inputPlaceholder: \"请输入内容\",\n    showCancelButton: false,\n    inputValue: item.keyName,\n    beforeClose: async (a, b, done) => {\n      if (a === \"confirm\") {\n        const data = await updateApiList({\n          keyName: b.inputValue,\n          id: item.id\n        });\n        ElMessage.success(data.msg);\n        if (data.code === 12000) {\n          searchApi();\n          done();\n        }\n      } else {\n        done();\n      }\n    },\n  });\n};\n\nconst createApi = () => {\n  if (apiList.value.length >= 3) {\n    ElMessage.error('API KEYS最多只能三条')\n    return;\n  }\n  createAPIKEY(() => {\n    searchApi();\n  });\n}\nconst searchApi = async () => {\n  const data = await getApiList(\"/buyer/user/apikeys\");\n  if (data.code === 12000) {\n    apiList.value = data.data;\n  }\n}\n\nonMounted(() => {\n  searchApi();\n})\n</script>\n<style scoped>\n.api-key {\n  text-align: end;\n  padding: 16px 0;\n}\n\n.api-key-content {\n  margin-top: 20px;\n}\n\n.api-key-content-header {\n  height: 38px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  box-sizing: border-box;\n}\n\n.api-key-content-header-left {\n  font-size: 16px;\n  height: 100%;\n  line-height: 38px;\n}\n\n.api-key-content-header-left-title {\n  margin-right: 15px;\n}\n\n.api-key-content-header-left-edit {\n  font-size: 14px;\n  color: #294aa5;\n  cursor: pointer;\n}\n\n.recharge-content-address-icon {\n  cursor: pointer;\n}\n\n.api-key-content-header-left-title-color {\n  color: #707582;\n  font-size: 15px;\n}\n\n.api-key-content-header-body {\n  width: 100%;\n  background: #f4f8ff;\n  border-radius: 6px;\n  margin-top: 30px;\n  text-align: start;\n  box-sizing: border-box;\n  padding-left: 20px;\n  height: 150px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.api-key-content-header-body-item {\n  height: 32px;\n  padding: 10px 0;\n  font-size: 15px;\n}\n\n.api-key-content-header-body-item-key {\n  text-align: right;\n  width: 80px;\n  height: 32px;\n  color: black;\n}\n\n.api-key-content-header-body-item-value {\n  margin-left: 15px;\n  color: #266ef1;\n}\n</style>\n"],"names":["apiList","ref","copyEnd","msg","copy","ElMessage","deleteApikey","item","ElMessageBox","data","delApiList","searchApi","edit","a","b","done","updateApiList","createApi","createAPIKEY","getApiList","onMounted"],"mappings":"g1EA0EA,MAAAA,EAAAC,EAAA,CAAA,CAAA,EAEAC,EAAAC,GAAA,CACAC,EAAA,CACA,IAAAD,EACA,SAAA,IAAA,CACAE,EAAA,QAAA,0BAAA,CACA,CACA,CAAA,CACA,EAEAC,EAAAC,GAAA,CACAC,EAAA,QACA,oDACA,eACA,CACA,kBAAA,eACA,iBAAA,eACA,KAAA,SACA,CACA,EACA,KAAA,SAAA,CACA,MAAAC,EAAA,MAAAC,EAAA,CAAA,OAAAH,EAAA,OAAA,EACAE,EAAA,MAAA,MACAE,IACAN,EAAA,CACA,KAAA,UACA,QAAA,0BACA,CAAA,GAEAA,EAAA,CACA,KAAA,QACA,QAAAI,EAAA,GACA,CAAA,CAGA,CAAA,CACA,EAEAG,EAAAL,GAAA,CACAC,EAAA,OAAA,GAAA,oFAAA,CACA,kBAAA,eACA,kBAAA,gBACA,iBAAA,iCACA,iBAAA,GACA,WAAAD,EAAA,QACA,YAAA,MAAAM,EAAAC,EAAAC,IAAA,CACA,GAAAF,IAAA,UAAA,CACA,MAAAJ,EAAA,MAAAO,EAAA,CACA,QAAAF,EAAA,WACA,GAAAP,EAAA,EACA,CAAA,EACAF,EAAA,QAAAI,EAAA,GAAA,EACAA,EAAA,OAAA,OACAE,IACAI,IAEA,MACAA,GAEA,CACA,CAAA,CACA,EAEAE,EAAA,IAAA,CACA,GAAAjB,EAAA,MAAA,QAAA,EAAA,CACAK,EAAA,MAAA,8CAAA,EACA,MACA,CACAa,EAAA,IAAA,CACAP,GACA,CAAA,CACA,EACAA,EAAA,SAAA,CACA,MAAAF,EAAA,MAAAU,EAAA,qBAAA,EACAV,EAAA,OAAA,OACAT,EAAA,MAAAS,EAAA,KAEA,EAEA,OAAAW,EAAA,IAAA,CACAT,GACA,CAAA"}